# 黄金价格追踪器 (Gold Price Tracker)

一个极简风格的 Windows 任务栏悬浮窗小工具，用于实时追踪国内和国际金价。

---

## ✨ 核心功能

*   **实时数据**：
    *   **国内金价**：直连上海黄金交易所 (Au T+D) 实时行情。
    *   **国际金价**：获取实时伦敦金价格。
    *   **智能联动**：休市期间自动根据国际金价和汇率估算国内价格，实现 24 小时动态更新。
*   **极简悬浮窗**：
    *   **无边框设计**：完美融入桌面环境。
    *   **透明背景**：默认透明，仅显示价格文字，不遮挡壁纸。
    *   **强制置顶**：顽强地驻留在屏幕最上层，防止被任务栏遮挡。
    *   **位置记忆**：自动保存窗口位置，重启后还原。
*   **个性化定制**：
    *   **外观设置**：可自定义字体颜色、背景颜色（支持透明度）、字体大小。
    *   **智能显隐**：可设置价格范围，仅在价格满足条件时显示。
*   **价格预警**：
    *   支持设置国内/国际金价的高低阈值。
    *   触发预警时弹出桌面通知（含防骚扰冷却机制）。
*   **安全稳定**：
    *   内置崩溃捕获与日志记录系统。
    *   绿色免安装，解压即用。

---

## 📅 版本历史

### v1.1.0 (2026-02-26)
*   **优化国内金价更新逻辑**：新增智能休市判断，休市期间自动切换为“伦敦金联动计算模式”，实现 24 小时价格动态更新。
*   **修复汇率解析**：修复了因新浪财经接口格式变更导致的汇率解析错误。
*   **体验升级**：移除了启动时的 CMD 黑色控制台窗口。

---

## 🚀 快速开始

### 用户使用
1.  下载最新版本的压缩包。
2.  解压后双击 `GoldPriceTracker.exe` 即可运行。
3.  **右键菜单**：
    *   **设置**：打开详细配置面板。
    *   **锁定位置**：防止误触拖动。
    *   **退出**：关闭程序。

### 开发者入门
本项目提供了详细的入门文档，即使是 Java 小白也能轻松上手。

*   📄 **[DEVELOPMENT_GUIDE.md](DEVELOPMENT_GUIDE.md)**: **强烈推荐阅读！** 包含环境搭建、核心原理解析、手把手复现教程等。

#### 环境要求
*   **JDK**: 17+ (推荐 Microsoft OpenJDK 21)
*   **Maven**: 3.8+
*   **IDE**: IntelliJ IDEA 或 VS Code

#### 编译运行
```bash
# 1. 克隆仓库
git clone https://github.com/YourUsername/gold-price-tracker.git

# 2. 编译打包
mvn clean package

# 3. 运行程序
java -jar target/gold-price-tracker-1.1.0-shaded.jar
```

---

## 📂 项目结构

```
gold-price-tracker/
├── src/
│   ├── main/
│   │   ├── java/com/goldpricetracker/
│   │   │   ├── backend/          # 后端逻辑 (数据获取、计算、启动管理)
│   │   │   ├── frontend/         # 前端界面 (控制器、设置窗口)
│   │   │   ├── Launcher.java     # 程序启动器 (错误捕获、日志)
│   │   │   └── MainApp.java      # JavaFX 入口 (窗口初始化)
│   │   └── resources/
│   │       └── fxml/             # 界面布局文件 (.fxml)
│   └── test/                     # 单元测试
├── target/                       # 编译输出目录
├── release/                      # 打包后的发布文件 (EXE)
├── pom.xml                       # Maven 配置文件
├── README.md                     # 项目说明文档
└── DEVELOPMENT_GUIDE.md          # 开发者入门指南
```

---

## ⚙️ 常见问题 (FAQ)

**Q: 软件为什么有时会被任务栏挡住？**
A: Windows 任务栏拥有极高的窗口层级。虽然本软件已开启“强制置顶”策略，但在点击任务栏时，操作系统可能会暂时提升任务栏层级。稍等片刻，软件会自动重新浮起。

**Q: 如何完全隐藏背景？**
A: 在“设置”中，将“背景颜色”设置为完全透明（Alpha通道为0），或使用默认的 1% 透明度（推荐，方便右键点击）。

**Q: 遇到闪退怎么办？**
A: 程序目录下会生成 `gold_price_tracker.log` 文件，请查看其中的报错信息。

---

## 🛠️ 技术栈

*   **语言**: Java 17
*   **UI 框架**: JavaFX 21
*   **网络库**: OkHttp 4
*   **构建工具**: Maven
*   **打包工具**: jpackage (生成原生 EXE)
