name: "v1.3-cleanup-and-refactor - 项目清理、规范化与版本升级"
description: |
  本项目当前为 JavaFX 实现。根据 `INITIAL.md` 的要求，我们需要清理残留的 Python 构建产物（来自旧版本或实验性的 Sidecar），
  同步 `CLAUDE.md` 的最新 Java 规范，并升级版本号至 1.3。

## 目标
1. 清理项目中所有非必要的构建产物和配置文件。
2. 建立任务追踪 (`TASK.md`) 和对话历史管理 (`chats/`)。
3. 升级项目版本至 1.3。
4. 确保代码库符合 `CLAUDE.md` 中的 Java 规范（注释、文档、编码）。

## 为什么
- **清理与瘦身**：移除残留的 Python 编译产物，减小项目体积并减少干扰。
- **标准化**：统一注释风格，提升代码可读性，确保 AI 和开发者能更好地理解现有逻辑。
- **版本演进**：正式进入 1.3 版本周期。

## 什么
- 物理删除 `build/`, `gold-backend.spec`, `dependency-reduced-pom.xml`。
- 新增 `TASK.md` 初始化项目任务。
- 创建 `chats/` 目录用于存储对话。
- 修改 `pom.xml` 的 `<version>` 标签。
- 对核心 Java 文件进行 Javadoc 和中文注释补充。

### 成功标准
- [ ] 项目中不再包含任何 Python 编译产物 (`.pyc`, `build/` 等)。
- [ ] `pom.xml` 版本号更新为 `1.3.0`。
- [ ] `mvn clean install` 编译通过。
- [ ] `mvn test` 所有单元测试通过。
- [ ] 关键业务逻辑文件（如 `PriceService.java`）包含详细的中文步骤分解注释。

## 所需所有上下文

### 代码库树状结构
```bash
# 核心结构
src/
  main/
    java/com/goldpricetracker/
      backend/      # 业务逻辑
      frontend/     # 控制器
      Launcher.java # 入口
      MainApp.java  # JavaFX 启动
    resources/
      fxml/         # 界面布局
  test/             # 单元测试
pom.xml             # 依赖管理
CLAUDE.md           # 项目规范
plan.md             # 未来规划
```

### 带有新增文件和责任的期望代码库树状结构
```bash
gold-price-tracker/
├── chats/          # 新增：对话历史记录
├── TASK.md         # 新增：任务追踪
└── (原有 Java 结构)
```

## 实施蓝图

### 按完成 PRP 所需顺序列出的任务

```yaml
任务 1: 项目清理 (Cleanup)
DELETE:
  - build/
  - gold-backend.spec
  - dependency-reduced-pom.xml

任务 2: 初始化管理文件 (Management Files)
CREATE TASK.md:
  - 内容包含：待办任务、进行中任务、已完成任务。
  - 记录 1.3 版本的主要目标。
CREATE chats/README.md:
  - 说明该目录用途。

任务 3: 版本更新 (Version Bump)
MODIFY pom.xml:
  - 将 <version>1.2.0</version> 修改为 <version>1.3.0</version>。

任务 4: 代码规范化与注释补充 (Refactoring & Documentation)
MODIFY src/main/java/com/goldpricetracker/backend/PriceService.java:
  - 补充类和方法的 Javadoc。
  - 确保内部逻辑有详细的中文步骤注释。
MODIFY src/main/java/com/goldpricetracker/MainApp.java:
  - 检查并优化注释。

任务 5: 验证与发布准备 (Validation)
COMMAND:
  - mvn clean compile
  - mvn test
```

## 验证循环

### 级别 1：语法和风格 (Maven Check)
```bash
# 验证 pom.xml 是否有效并编译代码
mvn compile
```

### 级别 2：单元测试
```bash
# 运行现有测试
mvn test
```

### 级别 3：最终确认
- 检查 `TASK.md` 是否正确初始化。
- 确认 `pom.xml` 版本。
- 检查核心文件是否已有 Javadoc。

## 最终验证检查清单
- [ ] `build/` 文件夹已物理删除。
- [ ] `TASK.md` 存在且包含当前任务。
- [ ] `pom.xml` 版本为 1.3.0。
- [ ] `mvn test` 全部通过。
- [ ] 代码库无遗留 Python 配置文件。

---
信心水平：10/10
