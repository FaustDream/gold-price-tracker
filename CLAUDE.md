### 🔄 项目认知与上下文
- **每次新对话开始时务必阅读 `plan.md`**，了解项目架构、目标、风格和约束条件。
- **使用一致的命名约定、文件结构和架构模式**，如 `plan.md` 中所述。
- **执行 Java 命令或构建项目时使用 Maven** (`mvn clean install`)。

### 🧱 代码结构与模块化
- **遵循 MVC 架构模式**，将界面 (FXML)、控制器 (Controller) 和业务逻辑 (Service) 清晰分离。
- **将代码组织在 `com.goldpricetracker` 包下**：
    - `backend/` - 核心业务逻辑、价格获取、计算服务。
    - `frontend/` - JavaFX 控制器逻辑。
- **资源文件管理**：
    - FXML 文件存放在 `src/main/resources/fxml/`。
    - 配置文件存放在 `src/main/resources/`。
- **依赖管理**：所有第三方库必须在 `pom.xml` 中声明，禁止直接引入 JAR 包。

### 🧪 测试与可靠性
- **始终为新功能创建 JUnit 5 单元测试**。
- **测试应位于 `src/test/java` 文件夹中**，并镜像主应用程序的包结构。
- **更新逻辑后务必运行现有测试**：使用 `mvn test` 验证。
- 至少包括：
    - 1个正常逻辑测试
    - 1个边界情况/异常处理测试

### ✅ 任务完成
- **完成任务后确保代码可编译**：运行 `mvn compile`。
- 任何新增功能需在 `README.md` 或相关文档中记录。
- **完成任务后立即在 `TASK.md` 中标记**。
- **INITIAL.md 任务追踪**：在处理 `INITIAL.md` 中的需求时，务必使用 `[x]` 标记或注释已完成的任务，防止重复。
- 将在开发过程中发现的新子任务或TODO添加到 `TASK.md` 的"工作中发现"部分。
### 📎 风格与约定
- **使用 Java 17** 作为开发语言，充分利用其现代特性（如 Record, Switch expressions 等）。
- **编码规范**：
    - 类名使用 `UpperCamelCase`。
    - 方法名和变量名使用 `lowerCamelCase`。
    - 常量使用 `UPPER_SNAKE_CASE`。
- **中文字符支持**：由于本项目包含大量中文注释，确保所有文件使用 `UTF-8` 编码。
- **代码内注释**：
    - 修改或新增代码必须包含大量中文注释。
    - 解释核心逻辑的步骤分解（如 `// 1. xxx`, `// 2. yyy`）。
    - 记录修改的原因和关键决策。

### 📚 文档与可解释性
- **为每个类和重要方法编写 Javadoc**（中文描述）。
- **非显而易见逻辑添加内联注释**，确保中级 Java 开发者能快速理解。
- **复杂计算逻辑需注明公式来源**（如：`国内金价 = 国际金价 / 31.1034768 * 汇率`）。
- **添加新功能、更改依赖项或修改设置步骤时更新 `README.md`**。
- **对话历史记录**：每次对话结束后或重要阶段，将对话的核心上下文、决策和进展记录在 `chats/` 目录下的 `.md` 文件中（按日期或功能命名，如 `chats/2026-02-28-feature-auth.md`）。
- **为非显而易见的代码添加注释**，确保中级开发者能够理解所有内容。
- 编写复杂逻辑时，**添加内联 `# 原因：` 注释**解释原因，而不仅仅是内容。
### 🧠 AI 行为规则
- **绝不要假设缺少上下文**：如果对 JavaFX 布局或 Maven 配置有疑问，请先查看现有文件。
- **绝不虚构库或方法**：仅使用 `pom.xml` 中已定义的依赖项或 Java 标准库。
- **在修改 FXML 前先分析对应的 Controller**，确保 ID 和方法绑定正确。
- **保持 UI 简洁性**：除非明确要求，否则不随意更改现有的透明、无边框、置顶窗口样式。
- **严格遵循该规范CLAUDE.md中的各种编码规范和注释要求、规则约束**。