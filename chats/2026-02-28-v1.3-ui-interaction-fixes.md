# 对话历史记录 - v1.3 布局修复、停靠优化与拖拽功能增强 (2026-02-28)

## 核心上下文
用户反馈 v1.3 版本存在三个 UI 和交互问题：
1. 价格未上下排列。
2. 软件未默认停靠在任务栏。
3. 软件无法手动移动。

## 关键决策
1.  **布局回归**：将 `rootBox` 的容器类型从 `HBox` 改回 `VBox`，并同步更新了 `DashboardController.java` 和 `Dashboard.fxml`，确保价格恢复上下垂直排列。
2.  **停靠优化**：
    -   在 `DashboardController.java` 中将 `isTaskbarMode` 默认值设为 `true`。
    -   在 `loadConfig` 中增加了对 `window.taskbar_mode` 和 `window.locked` 的读取。
    -   确保 `setStage` 时调用 `dockToTaskbar()`。
3.  **交互逻辑重构**：
    -   **自由拖拽**：移除了拖拽时必须处于非任务栏模式的限制。现在只要未锁定 (`!isLocked`)，用户即可通过鼠标左键拖动窗口。
    -   **自动解除停靠**：当用户手动拖动窗口时，程序会自动将 `isTaskbarMode` 设为 `false`，防止窗口自动吸附回任务栏，从而满足用户手动调整位置的需求。
4.  **重新打包**：使用 `jpackage` 重新生成了免安装 EXE 版本，并确保可执行文件命名为 `gold-price-tracker-1.3.0.exe`。

## 项目进展
- 修复了所有已知的 UI 布局和交互逻辑问题。
- 重新生成了包含修复补丁的 EXE 软件包。
- 软件现在支持：默认停靠任务栏、手动拖拽解除停靠、上下排列显示价格。

---
*记录人: AI 助手*
